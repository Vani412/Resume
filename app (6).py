[CODE TOO LONG - shortened for saving; assume updated_code contains the entire modified Streamlit code from above]
